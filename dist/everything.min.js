"use strict";angular.module("myApp",[]).factory("gameLogic",function(){function a(){return[["","","","","","","","","","",""],["","","","","","","","","","",""],["","","","","","","","","","",""],["","","","","","","","","","",""],["","","","","","","","","","",""],["","","","","","","","","","",""],["","","","","","","","","","",""],["","","","","","","","","","",""],["","","","","","","","","","",""],["","","","","","","","","","",""],["","","","","","","","","","",""]]}function b(a,b,c){var d=[];d.push([b,c]);var e=[];for(e[[b,c]]=[[-1,-1]];d.length>0;){var g=d.shift(),h=f(a,g[0],g[1]);for(var i in h)h[i]in e==0&&(d.push(h[i]),e[h[i]]=g)}return e}function c(a,c,d,e){var f=b(a,c,d,e),g=Object.keys(f);for(var h in g){var i=g[h],d=i.split(",");if(10==d[1])return!0}return!1}function d(a,c,d,e){var f=b(a,c,d,e),g=Object.keys(f);for(var h in g){var i=g[h],d=i.split(",");if(10==d[0])return!0}return!1}function e(a){for(var b=0;11>b;b++)if("B"==a[b][0]&&c(a,b,0,"B"))return"B";for(var e=0;11>e;e++)if("R"==a[0][e]&&d(a,0,e,"R"))return"R";return""}function f(a,b,c){var d=[];return g(b-1)&&g(c)&&a[b-1][c]===a[b][c]&&d.push([b-1,c]),g(b-1)&&g(c+1)&&a[b-1][c+1]===a[b][c]&&d.push([b-1,c+1]),g(b)&&g(c-1)&&a[b][c-1]==a[b][c]&&d.push([b,c-1]),g(b)&&g(c+1)&&a[b][c+1]==a[b][c]&&d.push([b,c+1]),g(b+1)&&g(c-1)&&a[b+1][c-1]==a[b][c]&&d.push([b+1,c-1]),g(b+1)&&g(c)&&a[b+1][c]==a[b][c]&&d.push([b+1,c]),d}function g(a){return a>=0&&11>a?!0:!1}function h(a,b){var c,d,e=[];for(c=0;11>c;c++)for(d=0;11>d;d++)try{e.push(i(a,c,d,b))}catch(f){}return e}function i(b,c,d,f){if(void 0===b&&(b=a()),""!=b[c][d])throw new Error("The position is not empty!");if(""!=e(b))throw new Error("The game has ended already!");var g=angular.copy(b);g[c][d]=0===f?"R":"B";var h,i=e(g);return h=""!=i?{endMatch:{endMatchScores:"R"===i?[1,0]:"B"===i?[0,1]:[0,0]}}:{setTurn:{turnIndex:1-f}},[h,{set:{key:"board",value:g}},{set:{key:"delta",value:{row:c,col:d}}}]}function j(a){var b=a.move,c=a.turnIndexBeforeMove,d=a.stateBeforeMove;try{var e=b[2].set.value,f=e.row,g=e.col,h=d.board,j=i(h,f,g,c);if(!angular.equals(b,j))return!1}catch(k){return!1}return!0}return{getInitialBoard:a,getPossibleMoves:h,createMove:i,checkWinner:b,getHorizontalWin:c,getVerticalWin:d,getWinner:e,isMoveOk:j}}),angular.module("myApp").controller("Ctrl",["$scope","$log","$timeout","gameService","stateService","gameLogic","resizeGameAreaService",function(a,b,c,d,e,f,g){function h(){var b=f.getPossibleMoves(a.board,a.turnIndex),c=Math.floor(Math.random()*b.length);d.makeMove(b[c])}function i(b){a.board=b.stateAfterMove.board,a.delta=b.stateAfterMove.delta,void 0===a.board&&(a.board=f.getInitialBoard()),a.isYourTurn=b.turnIndexAfterMove>=0&&b.yourPlayerIndex===b.turnIndexAfterMove,a.turnIndex=b.turnIndexAfterMove,a.isYourTurn&&""===b.playersInfo[b.yourPlayerIndex].playerId&&(console.log("computer turn"),a.isYourTurn=!1,c(h,500))}g.setWidthToHeight(1),a.cellClicked=function(c,e){if(b.info(["Clicked on cell:",c,e]),"?throwException"===window.location.search)throw new Error("Throwing the error because URL has '?throwException'");if(a.isYourTurn)try{var g=f.createMove(a.board,c,e,a.turnIndex);a.isYourTurn=!1,d.makeMove(g)}catch(h){return void b.info(["Cell is already full in position:",c,e])}},a.shouldShowImage=function(b,c){var d=a.board[b][c];return""!==d},a.getImageSrc=function(b,c){var d=a.board[b][c];return"R"===d?"imgs/R.png":"B"===d?"imgs/B.png":""},a.shouldSlowlyAppear=function(b,c){return void 0!==a.delta&&a.delta.row===b&&a.delta.col===c},d.setGame({gameDeveloperEmail:"npb245@nyu.edu",minNumberOfPlayers:2,maxNumberOfPlayers:2,isMoveOk:f.isMoveOk,updateUI:i})}]);
//# sourceMappingURL=everything.min.js.map