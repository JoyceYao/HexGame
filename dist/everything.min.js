var gameLogic;!function(a){function b(){return[["","","","","","","","","","",""],["","","","","","","","","","",""],["","","","","","","","","","",""],["","","","","","","","","","",""],["","","","","","","","","","",""],["","","","","","","","","","",""],["","","","","","","","","","",""],["","","","","","","","","","",""],["","","","","","","","","","",""],["","","","","","","","","","",""],["","","","","","","","","","",""]]}function c(a,b,c){var e=[];e.push([b,c]);var f={};for(f[d(b,c)]=[-1,-1];e.length>0;){var g=e.shift(),i=h(a,g[0],g[1]);for(var j in i){var k=d(i[j].row,i[j].col);k in f==0&&(e.push([i[j].row,i[j].col]),f[k]=g)}}return f}function d(a,b){return a+","+b}function e(a,b,d,e){var f=c(a,b,d,e),g=Object.keys(f);for(var h in g){var i=g[h],j=i.split(",");if(10==parseInt(j[1]))return!0}return!1}function f(a,b,d,e){var f=c(a,b,d,e),g=Object.keys(f);for(var h in g){var i=g[h],j=i.split(",");if(10==parseInt(j[0]))return!0}return!1}function g(a){for(var b=0;11>b;b++)if("B"==a[b][0]&&e(a,b,0,"B"))return"B";for(var c=0;11>c;c++)if("R"==a[0][c]&&f(a,0,c,"R"))return"R";return""}function h(a,b,c){var d=[];return i(b-1)&&i(c)&&a[b-1][c]===a[b][c]&&d.push({row:b-1,col:c}),i(b-1)&&i(c+1)&&a[b-1][c+1]===a[b][c]&&d.push({row:b-1,col:c+1}),i(b)&&i(c-1)&&a[b][c-1]==a[b][c]&&d.push({row:b,col:c-1}),i(b)&&i(c+1)&&a[b][c+1]==a[b][c]&&d.push({row:b,col:c+1}),i(b+1)&&i(c-1)&&a[b+1][c-1]==a[b][c]&&d.push({row:b+1,col:c-1}),i(b+1)&&i(c)&&a[b+1][c]==a[b][c]&&d.push({row:b+1,col:c}),d}function i(a){return a>=0&&11>a?!0:!1}function j(a,b){for(var c=[],d=0;11>d;d++)for(var e=0;11>e;e++)try{c.push(k(a,d,e,b))}catch(f){console.log("getPossibleMoves!! e="+f)}return c}function k(a,c,d,e){if(void 0===a&&(a=b()),console.log("createMove[1]"),""!=a[c][d])throw new Error("The position is not empty!");if(console.log("createMove[2]"),""!=g(a))throw new Error("The game has ended already!");console.log("createMove[3]");var f=angular.copy(a);f[c][d]=0===e?"R":"B";var h,i=g(f);return h=""!=i?{endMatch:{endMatchScores:"R"===i?[1,0]:"B"===i?[0,1]:[0,0]}}:{setTurn:{turnIndex:1-e}},[h,{set:{key:"board",value:f}},{set:{key:"delta",value:{row:c,col:d}}}]}function l(a){var b=a.move,c=a.turnIndexBeforeMove,d=a.stateBeforeMove;try{var e=b[2].set.value,f=e.row,g=e.col,h=d.board,i=k(h,f,g,c);if(!angular.equals(b,i))return!1}catch(j){return!1}return!0}a.getInitialBoard=b,a.getPossibleMoves=j,a.createMove=k,a.isMoveOk=l}(gameLogic||(gameLogic={}));var game;!function(a){function b(){resizeGameAreaService.setWidthToHeight(1),dragAndDropService.addDragListener("gameArea",e),s=document.getElementById("draggingLines"),t=document.getElementById("horizontalDraggingLine"),u=document.getElementById("verticalDraggingLine"),v=document.getElementById("clickToDragPiece"),w=document.getElementById("gameArea"),gameService.setGame({minNumberOfPlayers:2,maxNumberOfPlayers:2,isMoveOk:gameLogic.isMoveOk,updateUI:k})}function c(a,b){for(var c,d=a;b>d;d++)c[d]=d;return c}function d(a,b){var c=B[a][b];return"R"===c?{"-webkit-animation":"moveAnimation 2s",animation:"moveAnimation 2s"}:"B"===c?{"-webkit-animation":"moveAnimation 2s",animation:"moveAnimation 2s"}:{}}function e(a,b,c){var d=b-w.offsetLeft,e=c-w.offsetTop;console.log("old xy=",d,",",e);var g=document.getElementById("e2e_test_div_0x0").offsetLeft,j=document.getElementById("e2e_test_div_0x0").offsetTop;console.log("left top = ",g),console.log("left top = ",j),d-=g,e-=j,console.log("x,y=",d,",",e);var k=document.getElementById("border").clientWidth,l=document.getElementById("border").clientHeight;if(0>d||0>e||d>=k||e>=l||g>d)return v.style.display="none",void(s.style.display="none");v.style.display="inline",s.style.display="inline";var m=document.getElementById("hexagon").clientHeight/2,n=Math.floor(y*d/k),o=Math.floor(x*e/l);o=Math.floor((d*Math.sqrt(3)/3-e/3)/m),n=Math.floor(2*e/3/m);var p=document.getElementById("hexagon").clientWidth/2;console.log("RADIUS=",p);{var q=1.5*p,A=Math.floor(d/q),B=document.getElementById("hexagon").clientHeight,C=e-A%2*B/2;Math.floor(C/B)}d=(d-p)/document.getElementById("hexagon").clientHeight;var D=e/p,E=Math.floor(d+D),F=Math.floor((Math.floor(D-d)+E)/3),G=Math.floor((Math.floor(2*d+1)+E)/3)-F;o=F,n=G;var H=f(o,n);console.log("row col = ",o," ",n),(n>12||0>=n)&&(console.log("wrong col = ",n),s.style.display="none",v.style.display="none");var I=i(o,H),J=i(0,H);console.log(I),u.setAttribute("x1",I.x+""),u.setAttribute("y1",J.y+"");var K=i(12,n);u.setAttribute("x2",I.x+""),u.setAttribute("y2",K.y+"");var L=i(o,f(o,0)),M=i(o,f(o,12));t.setAttribute("x1",L.x+""),t.setAttribute("x2",M.x+""),t.setAttribute("y1",I.y+""),t.setAttribute("y2",I.y+""),1===z?(t.setAttribute("stroke","blue"),u.setAttribute("stroke","blue")):(t.setAttribute("stroke","red"),u.setAttribute("stroke","red"));var N="rotate(-34.5 "+Math.floor(I.x)+" "+Math.floor(I.y)+")";u.setAttribute("transform",N);var O=h(o,H);return v.style.left=O.left+"px",v.style.top=O.top+"px",2>o&&o>9?(s.style.display="none",void(v.style.display="none")):void(("touchend"===a||"touchcancel"===a||"touchleave"===a||"mouseup"===a)&&(v.style.display="none",s.style.display="none",r(o-1,n-1)))}function f(a,b){var c;return c=a-1===0?b+1:a-1===1?b+1:a-1===2||a-1===3?b+2:a-1===4||a-1===5?b+3:a-1===6||a-1===7?b+4:a-1===8||a-1===9?b+5:b+6}function g(){{var a=(document.getElementById("border").clientWidth-5,document.getElementById("border").clientHeight),b=document.getElementById("hexagon").clientWidth;document.getElementById("hexagon").clientHeight}return{width:b,height:a/x}}function h(a,b){var c,d=g();return c=a%2===0?b*d.width+d.width/2:b*d.width,{top:a*d.height,left:c}}function i(a,b){var c,d=g();return c=a%2===1?b*d.width+d.width/2:b*d.width+d.width,{x:c,y:a*d.height+d.height/2}}function j(){var a=gameLogic.getPossibleMoves(B,z),b=Math.floor(Math.random()*a.length);gameService.makeMove(a[b])}function k(a){B=a.stateAfterMove.board,void 0===B&&(B=gameLogic.getInitialBoard()),A=a.turnIndexAfterMove>=0&&a.yourPlayerIndex===a.turnIndexAfterMove,z=a.turnIndexAfterMove,A&&""===a.playersInfo[a.yourPlayerIndex].playerId&&(A=!1,$timeout(j,500))}function l(a,b){if("?throwException"===window.location.search)throw new Error("Throwing the error because URL has '?throwException'");if(A)try{var c=gameLogic.createMove(B,a,b,z);A=!1,gameService.makeMove(c)}catch(d){return console.log("exception!! e="+d),void log.info(["Cell is already full in position:",a,b])}}function m(a,b){var c=B[a][b];return""!==c}function n(a,b){return"R"===B[a][b]}function o(a,b){return"B"===B[a][b]}function p(a,b){var c=B[a][b];return"R"===c?"imgs/R.png":"B"===c?"imgs/B.png":""}function q(){return 1===z?"imgs/B.png":"imgs/R.png"}function r(a,b){$rootScope.$apply(function(){var c="Dragged to "+a+"x"+b;log.info(c),c=c,l(a,b)})}var s,t,u,v,w,x=13,y=11,z=0,A=!1,B=null;a.init=b,a.numbersTo=c,a.getStyle=d,a.cellClicked=l,a.shouldShowImage=m,a.isPieceR=n,a.isPieceB=o,a.getImageSrc=p,a.getPreviewSrc=q}(game||(game={})),angular.module("myApp",["ngTouch","ui.bootstrap","gameServices"]).run(function(){$rootScope.game=game,translate.setLanguage("en",{RULES_OF_HEX:"Rules of HEX",RULES_SLIDE1:"Each player places one stone of their color on the board per turn.",RULES_SLIDE2:"A player wins when they connect stones across the board sides corresponding to their stone colour. Red player won this game by connecting vertically.",RULES_SLIDE3:"In the contrary, blue player won this game by connecting horizontally.",CLOSE:"Close"}),game.init()});
//# sourceMappingURL=everything.min.js.map